{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/lib/store.ts"],"sourcesContent":["// frontend/lib/store.ts\r\nimport { create } from \"zustand\";\r\nimport { persist, createJSONStorage } from \"zustand/middleware\";\r\n\r\nexport type SyncStatus = \"local-only\" | \"sync-pending\" | \"synced\";\r\n\r\nexport type BudgetFields = {\r\n  income: number;\r\n  bills: number;\r\n  food: number;\r\n  transport: number;\r\n  subscriptions: number;\r\n  misc: number;\r\n};\r\n\r\nexport type Budget = BudgetFields & {\r\n  lastSavedAt?: string;\r\n  syncStatus?: SyncStatus;\r\n};\r\n\r\ntype StoreState = {\r\n  selectedMonth: string;\r\n  budgetsByMonth: Record<string, Budget>;\r\n  budget: Budget;\r\n  setMonth: (month: string) => void;\r\n  setField: (field: keyof BudgetFields, value: number) => void;\r\n  markSynced: (timestamp: string) => void;\r\n  replaceBudget: (serverBudget: Partial<BudgetFields> & { updated_at?: string }) => void;\r\n};\r\n\r\nconst emptyBudget: Budget = {\r\n  income: 0,\r\n  bills: 0,\r\n  food: 0,\r\n  transport: 0,\r\n  subscriptions: 0,\r\n  misc: 0,\r\n  lastSavedAt: undefined,\r\n  syncStatus: \"local-only\",\r\n};\r\n\r\nfunction currentMonthLabel() {\r\n  return new Date().toLocaleString(\"en-US\", {\r\n    month: \"long\",\r\n    year: \"numeric\",\r\n  }); // e.g. \"December 2025\"\r\n}\r\n\r\nexport const useBudgetStore = create<StoreState>()(\r\n  persist(\r\n    (set, get) => {\r\n      const initialMonth = currentMonthLabel();\r\n      return {\r\n        selectedMonth: initialMonth,\r\n        budgetsByMonth: { [initialMonth]: emptyBudget },\r\n        budget: emptyBudget,\r\n\r\n        setMonth: (month) => {\r\n          const state = get();\r\n          const existing = state.budgetsByMonth[month] ?? { ...emptyBudget };\r\n          set({\r\n            selectedMonth: month,\r\n            budget: existing,\r\n            budgetsByMonth: {\r\n              ...state.budgetsByMonth,\r\n              [month]: existing,\r\n            },\r\n          });\r\n        },\r\n\r\n        setField: (field, value) => {\r\n          const state = get();\r\n          const month = state.selectedMonth;\r\n          const current = state.budgetsByMonth[month] ?? { ...emptyBudget };\r\n\r\n          const updated: Budget = {\r\n            ...current,\r\n            [field]: value,\r\n            lastSavedAt: new Date().toISOString(),\r\n            syncStatus: \"sync-pending\",\r\n          };\r\n\r\n          set({\r\n            budget: updated,\r\n            budgetsByMonth: {\r\n              ...state.budgetsByMonth,\r\n              [month]: updated,\r\n            },\r\n          });\r\n        },\r\n\r\n        markSynced: (timestamp) => {\r\n          const state = get();\r\n          const month = state.selectedMonth;\r\n          const current = state.budgetsByMonth[month] ?? { ...emptyBudget };\r\n          const updated: Budget = {\r\n            ...current,\r\n            lastSavedAt: timestamp,\r\n            syncStatus: \"synced\",\r\n          };\r\n          set({\r\n            budget: updated,\r\n            budgetsByMonth: {\r\n              ...state.budgetsByMonth,\r\n              [month]: updated,\r\n            },\r\n          });\r\n        },\r\n\r\n        replaceBudget: (serverBudget) => {\r\n          const state = get();\r\n          const month = state.selectedMonth;\r\n          const updated: Budget = {\r\n            ...emptyBudget,\r\n            ...serverBudget,\r\n            lastSavedAt:\r\n              serverBudget.updated_at || new Date().toISOString(),\r\n            syncStatus: \"synced\",\r\n          };\r\n          set({\r\n            budget: updated,\r\n            budgetsByMonth: {\r\n              ...state.budgetsByMonth,\r\n              [month]: updated,\r\n            },\r\n          });\r\n        },\r\n      };\r\n    },\r\n    {\r\n      name: \"budgetbox-store\",\r\n      storage: createJSONStorage(() => localStorage),\r\n    }\r\n  )\r\n);\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;AACA;;;AA4BA,MAAM,cAAsB;IAC1B,QAAQ;IACR,OAAO;IACP,MAAM;IACN,WAAW;IACX,eAAe;IACf,MAAM;IACN,aAAa;IACb,YAAY;AACd;AAEA,SAAS;IACP,OAAO,IAAI,OAAO,cAAc,CAAC,SAAS;QACxC,OAAO;QACP,MAAM;IACR,IAAI,uBAAuB;AAC7B;AAEO,MAAM,iBAAiB,IAAA,2KAAM,IAClC,IAAA,iLAAO,EACL,CAAC,KAAK;IACJ,MAAM,eAAe;IACrB,OAAO;QACL,eAAe;QACf,gBAAgB;YAAE,CAAC,aAAa,EAAE;QAAY;QAC9C,QAAQ;QAER,UAAU,CAAC;YACT,MAAM,QAAQ;YACd,MAAM,WAAW,MAAM,cAAc,CAAC,MAAM,IAAI;gBAAE,GAAG,WAAW;YAAC;YACjE,IAAI;gBACF,eAAe;gBACf,QAAQ;gBACR,gBAAgB;oBACd,GAAG,MAAM,cAAc;oBACvB,CAAC,MAAM,EAAE;gBACX;YACF;QACF;QAEA,UAAU,CAAC,OAAO;YAChB,MAAM,QAAQ;YACd,MAAM,QAAQ,MAAM,aAAa;YACjC,MAAM,UAAU,MAAM,cAAc,CAAC,MAAM,IAAI;gBAAE,GAAG,WAAW;YAAC;YAEhE,MAAM,UAAkB;gBACtB,GAAG,OAAO;gBACV,CAAC,MAAM,EAAE;gBACT,aAAa,IAAI,OAAO,WAAW;gBACnC,YAAY;YACd;YAEA,IAAI;gBACF,QAAQ;gBACR,gBAAgB;oBACd,GAAG,MAAM,cAAc;oBACvB,CAAC,MAAM,EAAE;gBACX;YACF;QACF;QAEA,YAAY,CAAC;YACX,MAAM,QAAQ;YACd,MAAM,QAAQ,MAAM,aAAa;YACjC,MAAM,UAAU,MAAM,cAAc,CAAC,MAAM,IAAI;gBAAE,GAAG,WAAW;YAAC;YAChE,MAAM,UAAkB;gBACtB,GAAG,OAAO;gBACV,aAAa;gBACb,YAAY;YACd;YACA,IAAI;gBACF,QAAQ;gBACR,gBAAgB;oBACd,GAAG,MAAM,cAAc;oBACvB,CAAC,MAAM,EAAE;gBACX;YACF;QACF;QAEA,eAAe,CAAC;YACd,MAAM,QAAQ;YACd,MAAM,QAAQ,MAAM,aAAa;YACjC,MAAM,UAAkB;gBACtB,GAAG,WAAW;gBACd,GAAG,YAAY;gBACf,aACE,aAAa,UAAU,IAAI,IAAI,OAAO,WAAW;gBACnD,YAAY;YACd;YACA,IAAI;gBACF,QAAQ;gBACR,gBAAgB;oBACd,GAAG,MAAM,cAAc;oBACvB,CAAC,MAAM,EAAE;gBACX;YACF;QACF;IACF;AACF,GACA;IACE,MAAM;IACN,SAAS,IAAA,2LAAiB,EAAC,IAAM;AACnC"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/lib/syncClient.ts"],"sourcesContent":["// frontend/lib/syncClient.ts\r\nconst API_BASE =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4000\";\r\n\r\nimport type { BudgetFields } from \"./store\";\r\n\r\nexport async function postSync(\r\n  budget: BudgetFields,\r\n  month: string\r\n): Promise<{ timestamp?: string }> {\r\n  const res = await fetch(`${API_BASE}/budget/sync`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ month, budget }),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    throw new Error(\"Failed to sync\");\r\n  }\r\n\r\n  const data = await res.json();\r\n  // Expect backend to return { success, budget: { updated_at, ... } }\r\n  const ts =\r\n    data?.budget?.updated_at || data?.timestamp || new Date().toISOString();\r\n  return { timestamp: ts };\r\n}\r\n\r\nexport async function getLatest(month: string): Promise<{\r\n  budget: any | null;\r\n}> {\r\n  const res = await fetch(\r\n    `${API_BASE}/budget/latest?month=${encodeURIComponent(month)}`\r\n  );\r\n  if (!res.ok) {\r\n    throw new Error(\"Failed to fetch latest\");\r\n  }\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;AAC7B,MAAM,WACJ,6DAAmC;AAI9B,eAAe,SACpB,MAAoB,EACpB,KAAa;IAEb,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,YAAY,CAAC,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAO;IACvC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,oEAAoE;IACpE,MAAM,KACJ,MAAM,QAAQ,cAAc,MAAM,aAAa,IAAI,OAAO,WAAW;IACvE,OAAO;QAAE,WAAW;IAAG;AACzB;AAEO,eAAe,UAAU,KAAa;IAG3C,MAAM,MAAM,MAAM,MAChB,GAAG,SAAS,qBAAqB,EAAE,mBAAmB,QAAQ;IAEhE,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/components/OfflineIndicator.tsx"],"sourcesContent":["// components/OfflineIndicator.tsx\r\n\"use client\";\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useBudgetStore } from \"../lib/store\";\r\nimport { postSync, getLatest } from \"../lib/syncClient\";\r\n\r\nconst API_BASE =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4000\";\r\n\r\n// small helper to fetch with timeout\r\nasync function fetchWithTimeout(\r\n  url: string,\r\n  opts: RequestInit = {},\r\n  timeout = 3000\r\n) {\r\n  const controller = new AbortController();\r\n  const id = setTimeout(() => controller.abort(), timeout);\r\n  try {\r\n    const res = await fetch(url, { ...opts, signal: controller.signal });\r\n    clearTimeout(id);\r\n    return res;\r\n  } catch (err) {\r\n    clearTimeout(id);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport default function OfflineIndicator() {\r\n  const [online, setOnline] = useState<boolean>(\r\n    typeof navigator !== \"undefined\" ? navigator.onLine : true\r\n  );\r\n  const [serverUp, setServerUp] = useState<boolean | null>(null);\r\n  const [checking, setChecking] = useState(false);\r\n\r\n  const budget = useBudgetStore((s) => s.budget);\r\n  const markSynced = useBudgetStore((s) => s.markSynced);\r\n  const replaceBudget = useBudgetStore((s) => s.replaceBudget);\r\n  const selectedMonth = useBudgetStore((s) => s.selectedMonth);\r\n\r\n  const intervalRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    const onOnline = () => setOnline(true);\r\n    const onOffline = () => setOnline(false);\r\n    window.addEventListener(\"online\", onOnline);\r\n    window.addEventListener(\"offline\", onOffline);\r\n    // initial server probe\r\n    probeServer();\r\n    // poll every 10s\r\n    intervalRef.current = window.setInterval(probeServer, 10000);\r\n    return () => {\r\n      window.removeEventListener(\"online\", onOnline);\r\n      window.removeEventListener(\"offline\", onOffline);\r\n      if (intervalRef.current) window.clearInterval(intervalRef.current);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  async function probeServer() {\r\n    if (!navigator.onLine) {\r\n      setServerUp(false);\r\n      return;\r\n    }\r\n    setChecking(true);\r\n    try {\r\n      const res = await fetchWithTimeout(`${API_BASE}/health`, {}, 3000);\r\n      setServerUp(res.ok);\r\n    } catch {\r\n      setServerUp(false);\r\n    } finally {\r\n      setChecking(false);\r\n    }\r\n  }\r\n\r\n  const doSync = async () => {\r\n    if (!serverUp) {\r\n      alert(\"Server is not reachable — cannot sync.\");\r\n      return;\r\n    }\r\n    try {\r\n      const { income, bills, food, transport, subscriptions, misc } = budget;\r\n      const res = await postSync(\r\n        { income, bills, food, transport, subscriptions, misc },\r\n        selectedMonth\r\n      );\r\n      if (res && res.timestamp) {\r\n        markSynced(res.timestamp);\r\n        alert(\"Synced ✅ at \" + res.timestamp);\r\n      } else {\r\n        alert(\"Sync returned unexpected response\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Sync failed — still local-only.\");\r\n      setServerUp(false);\r\n    }\r\n  };\r\n\r\n  const fetchLatestFromServer = async () => {\r\n    if (!serverUp) {\r\n      alert(\"Server is not reachable — cannot get latest.\");\r\n      return;\r\n    }\r\n    try {\r\n      const r = await getLatest(selectedMonth);\r\n      if (r && r.budget) {\r\n        replaceBudget(r.budget);\r\n        alert(\"Replaced with latest from server\");\r\n      } else {\r\n        alert(\"No server copy found for this month\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to fetch latest\");\r\n      setServerUp(false);\r\n    }\r\n  };\r\n\r\n  const statusLabel = (() => {\r\n    if (!online) return \"Device: offline\";\r\n    if (serverUp === null)\r\n      return checking ? \"Checking server…\" : \"Server: unknown\";\r\n    return serverUp ? \"Server: online\" : \"Server: unreachable\";\r\n  })();\r\n\r\n  return (\r\n    <div className=\"inline-flex flex-wrap items-center gap-3 bg-white/80 rounded-full border border-slate-200 px-4 py-2 shadow-sm\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <span\r\n          className={`h-2.5 w-2.5 rounded-full ${\r\n            online ? \"bg-emerald-500\" : \"bg-red-500\"\r\n          }`}\r\n        />\r\n        <span className=\"text-sm text-slate-700\">\r\n          {online ? \"Online\" : \"Offline\"}\r\n        </span>\r\n      </div>\r\n\r\n      <span\r\n        className={`text-xs px-2 py-1 rounded-full border ${\r\n          budget.syncStatus === \"synced\"\r\n            ? \"border-emerald-500 text-emerald-600 bg-emerald-50\"\r\n            : budget.syncStatus === \"sync-pending\"\r\n            ? \"border-amber-500 text-amber-600 bg-amber-50\"\r\n            : \"border-slate-300 text-slate-600 bg-slate-50\"\r\n        }`}\r\n      >\r\n        {budget.syncStatus\r\n          ? `Status: ${budget.syncStatus}`\r\n          : \"Status: local-only\"}\r\n      </span>\r\n\r\n      <button\r\n        onClick={doSync}\r\n        className=\"rounded-full px-3 py-1.5 text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-60\"\r\n      >\r\n        Sync\r\n      </button>\r\n\r\n      <button\r\n        onClick={fetchLatestFromServer}\r\n        className=\"rounded-full px-3 py-1.5 text-sm font-medium border border-slate-300 text-slate-700 hover:bg-slate-50 transition-colors\"\r\n      >\r\n        Get Latest\r\n      </button>\r\n\r\n      <span className=\"text-xs text-slate-500\">{statusLabel}</span>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/components/BudgetForm.tsx"],"sourcesContent":["'use client'\r\nimport React from 'react'\r\nimport { useBudgetStore } from '@/lib/store'\r\n\r\n\r\nexport default function BudgetForm() {\r\n  const budget = useBudgetStore((s: { budget: any }) => s.budget)\r\n  const setField = useBudgetStore((s: { setField: any }) => s.setField)\r\n\r\n  const fields: [keyof typeof budget, string][] = [\r\n    ['income', 'Income'],\r\n    ['bills', 'Monthly Bills'],\r\n    ['food', 'Food'],\r\n    ['transport', 'Transport'],\r\n    ['subscriptions', 'Subscriptions'],\r\n    ['misc', 'Miscellaneous'],\r\n  ]\r\n\r\n  return (\r\n  <form className=\"space-y-4 p-6\">\r\n    <h2 className=\"text-xl font-semibold text-slate-900 mb-2\">\r\n      Monthly Budget\r\n    </h2>\r\n\r\n    <div className=\"space-y-3\">\r\n      {fields.map(([key, label]) => (\r\n        <div\r\n          key={String(key)}\r\n          className=\"flex items-center justify-between gap-3\"\r\n        >\r\n          <label className=\"text-sm text-slate-700 w-32\">{label}</label>\r\n          <input\r\n            type=\"number\"\r\n            value={(budget[key] ?? 0) as any}\r\n            onChange={(e) => setField(key as any, Number(e.target.value || 0))}\r\n            className=\"flex-1 rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            min={0}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n\r\n    <div className=\"pt-2 text-xs text-slate-500\">\r\n      Last saved:{\" \"}\r\n      {budget.lastSavedAt\r\n        ? new Date(budget.lastSavedAt).toLocaleString()\r\n        : \"—\"}\r\n    </div>\r\n  </form>\r\n);\r\n\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,uJAAc,EAAC,CAAC,IAAuB,EAAE,MAAM;IAC9D,MAAM,WAAW,IAAA,uJAAc,EAAC,CAAC,IAAyB,EAAE,QAAQ;IAEpE,MAAM,SAA0C;QAC9C;YAAC;YAAU;SAAS;QACpB;YAAC;YAAS;SAAgB;QAC1B;YAAC;YAAQ;SAAO;QAChB;YAAC;YAAa;SAAY;QAC1B;YAAC;YAAiB;SAAgB;QAClC;YAAC;YAAQ;SAAgB;KAC1B;IAED,qBACA,uQAAC;QAAK,WAAU;;0BACd,uQAAC;gBAAG,WAAU;0BAA4C;;;;;;0BAI1D,uQAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBACvB,uQAAC;wBAEC,WAAU;;0CAEV,uQAAC;gCAAM,WAAU;0CAA+B;;;;;;0CAChD,uQAAC;gCACC,MAAK;gCACL,OAAQ,MAAM,CAAC,IAAI,IAAI;gCACvB,UAAU,CAAC,IAAM,SAAS,KAAY,OAAO,EAAE,MAAM,CAAC,KAAK,IAAI;gCAC/D,WAAU;gCACV,KAAK;;;;;;;uBATF,OAAO;;;;;;;;;;0BAelB,uQAAC;gBAAI,WAAU;;oBAA8B;oBAC/B;oBACX,OAAO,WAAW,GACf,IAAI,KAAK,OAAO,WAAW,EAAE,cAAc,KAC3C;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/components/Dashboard.tsx"],"sourcesContent":["// frontend/components/Dashboard.tsx\r\n'use client'\r\nimport React from 'react'\r\nimport { useBudgetStore } from '../lib/store'\r\nimport { Pie } from 'react-chartjs-2'\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js'\r\nChartJS.register(ArcElement, Tooltip, Legend)\r\n\r\nexport default function Dashboard() {\r\n  const b = useBudgetStore(s => s.budget)\r\n  const totalExpenses = (b.bills + b.food + b.transport + b.subscriptions + b.misc) || 0\r\n  const income = b.income || 0\r\n  const burnRate = income > 0 ? totalExpenses / income : 0\r\n  const savings = income - totalExpenses\r\n\r\n  const monthEndPrediction = totalExpenses * 2.5\r\n\r\n  const suggestions: string[] = []\r\n  if (income > 0) {\r\n    if (b.food > 0.4 * income) suggestions.push('Reduce food spend next month.')\r\n    if (b.subscriptions > 0.3 * income) suggestions.push('Consider cancelling unused apps.')\r\n    if (savings < 0) suggestions.push('Your expenses exceed income.')\r\n  }\r\n\r\n  const pieData = {\r\n  labels: [\"Bills\", \"Food\", \"Transport\", \"Subscriptions\", \"Misc\"],\r\n  datasets: [\r\n    {\r\n      data: [b.bills, b.food, b.transport, b.subscriptions, b.misc],\r\n      backgroundColor: [\r\n        \"#3b82f6\", // Bills - blue\r\n        \"#22c55e\", // Food - green\r\n        \"#f97316\", // Transport - orange\r\n        \"#a855f7\", // Subscriptions - purple\r\n        \"#eab308\", // Misc - yellow\r\n      ],\r\n      borderColor: \"#ffffff\",\r\n      borderWidth: 2,\r\n      hoverOffset: 8,\r\n    },\r\n  ],\r\n};\r\n\r\nconst pieOptions = {\r\n  plugins: {\r\n    legend: {\r\n      position: \"right\" as const,\r\n      labels: {\r\n        usePointStyle: true,\r\n        pointStyle: \"circle\",\r\n        boxWidth: 8,\r\n        font: {\r\n          size: 12,\r\n        },\r\n      },\r\n    },\r\n    tooltip: {\r\n      callbacks: {\r\n        label: function (context: any) {\r\n          const label = context.label || \"\";\r\n          const value = context.parsed;\r\n          const total =\r\n            b.bills +\r\n            b.food +\r\n            b.transport +\r\n            b.subscriptions +\r\n            b.misc ||\r\n            1;\r\n          const pct = ((value / total) * 100).toFixed(1);\r\n          return `${label}: ₹${value} (${pct}%)`;\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\n  return (\r\n  <div className=\"p-6 space-y-4\">\r\n    <h2 className=\"text-xl font-semibold text-slate-900\">Dashboard</h2>\r\n\r\n    <div className=\"grid gap-4 md:grid-cols-3\">\r\n      {/* metric cards */}\r\n      <div className=\"border border-b-black rounded-xl p-4\">\r\n        <p className=\"text-xs font-medium text-slate-500\">Burn Rate</p>\r\n        <p className=\"mt-2 text-2xl font-semibold text-slate-900\">\r\n          {(burnRate * 100).toFixed(1)}%\r\n        </p>\r\n      </div>\r\n      <div className=\"border  border-b-black rounded-xl p-4\">\r\n        <p className=\"text-xs font-medium text-slate-500\">Savings Potential</p>\r\n        <p className=\"mt-2 text-2xl font-semibold text-emerald-700\">\r\n          ₹ {savings.toFixed(2)}\r\n        </p>\r\n      </div>\r\n      <div className=\"border  border-b-black rounded-xl p-4\">\r\n        <p className=\"text-xs font-medium text-slate-500\">\r\n          Month-End Prediction\r\n        </p>\r\n        <p className=\"mt-2 text-2xl font-semibold text-slate-900\">\r\n          ₹ {monthEndPrediction.toFixed(2)}\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <div className=\"grid gap-4 md:grid-cols-2\">\r\n      <div className=\"border  border-b-black rounded-xl p-4 flex items-center justify-center\">\r\n        <Pie data={pieData} options={pieOptions} />\r\n      </div>\r\n      <div className=\"border  border-b-black rounded-xl p-4\">\r\n        <p className=\"text-xs font-medium text-slate-500 mb-2\">\r\n          Rule-based Warnings\r\n        </p>\r\n        <ul className=\"text-sm text-slate-700 list-disc pl-4 space-y-1\">\r\n          {suggestions.length ? (\r\n            suggestions.map((s, i) => <li key={i}>{s}</li>)\r\n          ) : (\r\n            <li>No anomalies detected</li>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/BudgetBox/frontend/app/dashboard/page.tsx"],"sourcesContent":["// app/dashboard/page.tsx\r\n\"use client\";\r\n\r\nimport OfflineIndicator from \"../../components/OfflineIndicator\";\r\nimport BudgetForm from \"../../components/BudgetForm\";\r\nimport Dashboard from \"../../components/Dashboard\";\r\nimport { useBudgetStore } from \"@/lib/store\";\r\n\r\nconst MONTH_OPTIONS = (() => {\r\n  const now = new Date();\r\n  const labels: string[] = [];\r\n  for (let i = 0; i < 6; i++) {\r\n    const d = new Date(now);\r\n    d.setMonth(now.getMonth() - i);\r\n    labels.push(\r\n      d.toLocaleString(\"en-US\", { month: \"long\", year: \"numeric\" })\r\n    ); // e.g. \"December 2025\"\r\n  }\r\n  return labels;\r\n})();\r\n\r\nexport default function DashboardPage() {\r\n  const selectedMonth = useBudgetStore((s) => s.selectedMonth);\r\n  const setMonth = useBudgetStore((s) => s.setMonth);\r\n\r\n  return (\r\n    <main className=\"min-h-screen px-4 py-6\">\r\n      <div className=\"max-w-6xl mx-auto space-y-6\">\r\n        {/* Top bar */}\r\n        <header className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-semibold text-slate-900\">\r\n              BudgetBox Dashboard\r\n            </h1>\r\n            <p className=\"text-sm text-slate-500\">\r\n              Track your monthly budget offline-first, sync when you&apos;re\r\n              ready.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            <select\r\n              value={selectedMonth}\r\n              onChange={(e) => setMonth(e.target.value)}\r\n              className=\"rounded-full border border-slate-300 px-3 py-1.5 text-sm text-slate-700 bg-white shadow-sm\"\r\n            >\r\n              {MONTH_OPTIONS.map((m) => (\r\n                <option key={m} value={m}>\r\n                  {m}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <OfflineIndicator />\r\n          </div>\r\n        </header>\r\n\r\n        {/* Content */}\r\n        <section className=\"grid gap-6 md:grid-cols-2\">\r\n          <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200\">\r\n            <BudgetForm />\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200\">\r\n            <Dashboard />\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;AAGzB;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,gBAAgB,CAAC;IACrB,MAAM,MAAM,IAAI;IAChB,MAAM,SAAmB,EAAE;IAC3B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,MAAM,IAAI,IAAI,KAAK;QACnB,EAAE,QAAQ,CAAC,IAAI,QAAQ,KAAK;QAC5B,OAAO,IAAI,CACT,EAAE,cAAc,CAAC,SAAS;YAAE,OAAO;YAAQ,MAAM;QAAU,KAC1D,uBAAuB;IAC5B;IACA,OAAO;AACT,CAAC;AAEc,SAAS;IACtB,MAAM,gBAAgB,IAAA,uJAAc,EAAC,CAAC,IAAM,EAAE,aAAa;IAC3D,MAAM,WAAW,IAAA,uJAAc,EAAC,CAAC,IAAM,EAAE,QAAQ;IAEjD,qBACE,uQAAC;QAAK,WAAU;kBACd,cAAA,uQAAC;YAAI,WAAU;;8BAEb,uQAAC;oBAAO,WAAU;;sCAChB,uQAAC;;8CACC,uQAAC;oCAAG,WAAU;8CAAwC;;;;;;8CAGtD,uQAAC;oCAAE,WAAU;8CAAyB;;;;;;;;;;;;sCAMxC,uQAAC;4BAAI,WAAU;;8CACb,uQAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAU;8CAET,cAAc,GAAG,CAAC,CAAC,kBAClB,uQAAC;4CAAe,OAAO;sDACpB;2CADU;;;;;;;;;;8CAKjB,uQAAC,mKAAgB;;;;;;;;;;;;;;;;;8BAKrB,uQAAC;oBAAQ,WAAU;;sCACjB,uQAAC;4BAAI,WAAU;sCACb,cAAA,uQAAC,6JAAU;;;;;;;;;;sCAGb,uQAAC;4BAAI,WAAU;sCACb,cAAA,uQAAC,4JAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtB"}}]
}